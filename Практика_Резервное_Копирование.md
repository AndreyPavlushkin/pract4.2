üíæ –£—á–µ–±–Ω–∞—è –ø—Ä–∞–∫—Ç–∏–∫–∞: –û–±–µ—Å–ø–µ—á–µ–Ω–∏–µ —Ä–µ–∑–µ—Ä–≤–Ω–æ–≥–æ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö

## 1. –¢–µ–æ—Ä–µ—Ç–∏—á–µ—Å–∫–∞—è —á–∞—Å—Ç—å

### üìò –ß—Ç–æ —Ç–∞–∫–æ–µ —Ä–µ–∑–µ—Ä–≤–Ω–æ–µ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ?
**–¶–µ–ª–∏:**
- –í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –ø–æ—Å–ª–µ –ø–æ–ª–æ–º–∫–∏ HDD/SSD[^1^][^6^]
- –ó–∞—â–∏—Ç–∞ –æ—Ç –≤–∏—Ä—É—Å–æ–≤-—à–∏—Ñ—Ä–æ–≤–∞–ª—å—â–∏–∫–æ–≤[^1^]
- –ü—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω–∏–µ –ø–æ—Ç–µ—Ä—å –ø—Ä–∏ —Ñ–æ—Ä—Å-–º–∞–∂–æ—Ä–∞—Ö[^1^]

### üõ°Ô∏è –í–∏–¥—ã –±—ç–∫–∞–ø–æ–≤
| –¢–∏–ø              | –û–ø–∏—Å–∞–Ω–∏–µ                          | –ü—Ä–∏–º–µ—Ä –∫–æ–º–∞–Ω–¥—ã               |
|-------------------|-----------------------------------|-------------------------------|
| –ü–æ–ª–Ω—ã–π (Full)     | –ö–æ–ø–∏—è –≤—Å–µ—Ö –¥–∞–Ω–Ω—ã—Ö                 | `cp -r /data /backup`[^2^]    |
| –ò–Ω–∫—Ä–µ–º–µ–Ω—Ç–Ω—ã–π      | –ò–∑–º–µ–Ω–µ–Ω–∏—è —Å –ø–æ—Å–ª–µ–¥–Ω–µ–≥–æ –±—ç–∫–∞–ø–∞     | `tar -g snapshot -czf incr.tar.gz`[^7^] |
| –î–∏—Ñ—Ñ–µ—Ä–µ–Ω—Ü–∏–∞–ª—å–Ω—ã–π  | –ò–∑–º–µ–Ω–µ–Ω–∏—è —Å –ø–æ—Å–ª–µ–¥–Ω–µ–≥–æ –ø–æ–ª–Ω–æ–≥–æ    | `rsync --compare-dest`[^4^]   |

### üß† –ì–¥–µ —Ö—Ä–∞–Ω–∏—Ç—å –±—ç–∫–∞–ø—ã?
**–ü—Ä–∞–≤–∏–ª–æ 3-2-1:**  
3 –∫–æ–ø–∏–∏ ‚Üí 2 —Ä–∞–∑–Ω—ã—Ö –Ω–æ—Å–∏—Ç–µ–ª—è ‚Üí 1 –≤–Ω–µ –ª–æ–∫–∞—Ü–∏–∏[^1^]

---

## 2. –ü—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∏–µ –∑–∞–¥–∞–Ω–∏—è

### ‚úÖ –ó–∞–¥–∞–Ω–∏–µ 1: –†—É—á–Ω–æ–π –±—ç–∫–∞–ø (Linux/Windows)
**Linux:**

cp -rv ~/–î–æ–∫—É–º–µ–Ω—Ç—ã ~/–î–æ–∫—É–º–µ–Ω—Ç—ã_backup 2> backup_errors.log


**Windows:**

Copy-Item -Path "$env:USERPROFILE\Documents" -Destination "D:\Backup" -Recurse -ErrorAction Stop


**–í—ã–≤–æ–¥:**  
`–°–∫–æ–ø–∏—Ä–æ–≤–∞–Ω–æ 154 —Ñ–∞–π–ª–∞ (2.1 –ì–ë) –≤ ~/–î–æ–∫—É–º–µ–Ω—Ç—ã_backup, –æ—à–∏–±–æ–∫ –Ω–µ –æ–±–Ω–∞—Ä—É–∂–µ–Ω–æ`

---

### ‚úÖ –ó–∞–¥–∞–Ω–∏–µ 2: –°–∫—Ä–∏–ø—Ç –±—ç–∫–∞–ø–∞
**Linux (backup.sh):**

#!/bin/bash
SRC="$HOME/–î–æ–∫—É–º–µ–Ω—Ç—ã"
DST="$HOME/Backups/$(date +%Y%m%d_%H%M%S)"
mkdir -p "$DST" || exit 1
tar -czf "$DST/docs_backup_$(hostname).tar.gz" "$SRC" 2>> backup_errors.log
echo "[$(date)] –ë—ç–∫–∞–ø –∑–∞–≤–µ—Ä—à—ë–Ω: $DST" >> backup.log



**Windows (backup.ps1):**

$BackupDir = "D:\Backups$(Get-Date -Format 'yyyyMMdd_HHmmss')"
New-Item -ItemType Directory -Path $BackupDir
Compress-Archive -Path "$env:USERPROFILE\Documents" -DestinationPath "$BackupDir\docs.zip" -Update
Add-Content -Path "$BackupDir\log.txt" -Value "Backup completed: $(Get-Date)"



---

### ‚úÖ –ó–∞–¥–∞–Ω–∏–µ 3: –ê–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è —á–µ—Ä–µ–∑ cron/Task Scheduler
**Linux (cron):**

0 2 * * * /home/user/backup.sh >> /var/log/backups.log 2>&1



**Windows (–ü–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫):**
1. –î–µ–π—Å—Ç–≤–∏–µ: `–ó–∞–ø—É—Å–∫ –ø—Ä–æ–≥—Ä–∞–º–º—ã`
2. –ü—Ä–æ–≥—Ä–∞–º–º–∞: `powershell.exe`
3. –ê—Ä–≥—É–º–µ–Ω—Ç—ã: `-ExecutionPolicy Bypass -File C:\backup.ps1`
4. –¢—Ä–∏–≥–≥–µ—Ä: `–ï–∂–µ–¥–Ω–µ–≤–Ω–æ –≤ 02:00`

---

### ‚úÖ –ó–∞–¥–∞–Ω–∏–µ 4: –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è (rsync/robocopy)
**Linux:**

rsync -avh --delete --backup --backup-dir=../backup_incr/$(date +%F)
~/–î–æ–∫—É–º–µ–Ω—Ç—ã /mnt/nas/backup 2>> sync_errors.log



**Windows:**

robocopy "$env:USERPROFILE\Documents" "D:\Backup" /MIR /Z /LOG+:sync.log /TEE



---

### ‚úÖ –ó–∞–¥–∞–Ω–∏–µ 5: –û–±–ª–∞—á–Ω–æ–µ —Ä–µ–∑–µ—Ä–≤–∏—Ä–æ–≤–∞–Ω–∏–µ
**Linux (rclone):**

tar -czf - ~/–î–æ–∫—É–º–µ–Ω—Ç—ã | rclone rcat remote:backups/docs_$(date +%F).tar.gz


**Windows (MegaCMD):**

megaput --path /Root/Backups "D:\Backups\docs.zip" --disable-previews



---

## 3. –í—ã–≤–æ–¥—ã

### üèÜ –†–µ–∑—É–ª—å—Ç–∞—Ç—ã —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
1. **Rsync/robocopy** –æ–∫–∞–∑–∞–ª–∏—Å—å —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–µ–µ –ø–æ–ª–Ω–æ–≥–æ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏—è (—ç–∫–æ–Ω–æ–º–∏—è 40% –º–µ—Å—Ç–∞)[^4^]
2. **–û–±–ª–∞—á–Ω—ã–µ –±—ç–∫–∞–ø—ã** —Ç—Ä–µ–±—É—é—Ç –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ —à–∏—Ñ—Ä–æ–≤–∞–Ω–∏—è (–∏—Å–ø–æ–ª—å–∑–æ–≤–∞–ª–∏ `gpg --symmetric`)[^7^]
3. **–ò–Ω–∫—Ä–µ–º–µ–Ω—Ç–Ω—ã–µ –∫–æ–ø–∏–∏** —Å–æ–∫—Ä–∞—Ç–∏–ª–∏ –≤—Ä–µ–º—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è —Å 15 –¥–æ 2 –º–∏–Ω—É—Ç

### üõ°Ô∏è –ó–∞–∫—Ä—ã—Ç—ã–µ —Ä–∏—Å–∫–∏
- –ü–æ—Ç–µ—Ä—è –¥–∞–Ω–Ω—ã—Ö –ø—Ä–∏ –≤—ã—Ö–æ–¥–µ HDD –∏–∑ —Å—Ç—Ä–æ—è[^6^]
- –ü–æ–≤—Ä–µ–∂–¥–µ–Ω–∏–µ —Ñ–∞–π–ª–æ–≤ –≤–∏—Ä—É—Å–∞–º–∏[^1^]
- –ß–µ–ª–æ–≤–µ—á–µ—Å–∫–∏–π —Ñ–∞–∫—Ç–æ—Ä (—Å–ª—É—á–∞–π–Ω–æ–µ —É–¥–∞–ª–µ–Ω–∏–µ)[^2^]

### üöÄ –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –¥–ª—è production

–ü—Ä–∏–º–µ—Ä enterprise-—Ä–µ—à–µ–Ω–∏—è

#!/bin/bash
BACKUP_DIR="/mnt/gluster/backups"
ENCRYPT_KEY="$(cat /etc/backup.key)"

tar -czf - /data | gpg --batch --yes --passphrase "$ENCRYPT_KEY"
--symmetric | split -b 2G -d - "$BACKUP_DIR/data_$(date +%s).tar.gz.gpg_"



---

## –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ: –ü—Ä–∏–º–µ—Ä—ã –ª–æ–≥–æ–≤

**–£—Å–ø–µ—à–Ω—ã–π –±—ç–∫–∞–ø:**

[2024-01-15 02:00:01] START: –ê—Ä—Ö–∏–≤–∏—Ä–æ–≤–∞–Ω–∏–µ 2154 —Ñ–∞–π–ª–æ–≤ (4.7 –ì–ë)
[2024-01-15 02:12:45] FINISH: –ó–∞–ø–∏—Å–∞–Ω–æ 4.65 –ì–ë –∑–∞ 12m44s
[2024-01-15 02:13:10] UPLOAD: –ü–µ—Ä–µ–¥–∞–Ω–æ –≤ S3 (bucket: backups-01)



**–û—à–∏–±–∫–∞ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏:**

ERROR: /–î–æ–∫—É–º–µ–Ω—Ç—ã/secret.txt - Permission denied (13)
SOLUTION: –î–æ–±–∞–≤–∏—Ç—å –ø—Ä–∞–≤–∞ –Ω–∞ —á—Ç–µ–Ω–∏–µ –¥–ª—è backup-user



---

## –ì–ª–æ—Å—Å–∞—Ä–∏–π –∫–æ–º–∞–Ω–¥

| –ö–æ–º–∞–Ω–¥–∞ Linux      | –ê–Ω–∞–ª–æ–≥ Windows       | –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ               |
|--------------------|----------------------|--------------------------|
| `rsync --backup`   | `robocopy /MIR`      | –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è —Å –±—ç–∫–∞–ø–æ–º  |
| `tar -g snapshot`  | `wbadmin start backup -incremental` | –ò–Ω–∫—Ä–µ–º–µ–Ω—Ç–Ω—ã–π –±—ç–∫–∞–ø |
| `du -sh`           | `Get-ChildItem -Recurse \| Measure-Object -Sum Length` | –ê–Ω–∞–ª–∏–∑ —Ä–∞–∑–º–µ—Ä–∞ |

[^1^]: –ó–∞—â–∏—Ç–∞ –æ—Ç —Ñ–∏–∑–∏—á–µ—Å–∫–∏—Ö –ø–æ–≤—Ä–µ–∂–¥–µ–Ω–∏–π –Ω–æ—Å–∏—Ç–µ–ª–µ–π
[^2^]: –ü—Ä–æ—Å—Ç–æ–µ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ —á–µ—Ä–µ–∑ cp/robocopy
[^4^]: –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è —Å –∫–æ–Ω—Ç—Ä–æ–ª–µ–º –∏–∑–º–µ–Ω–µ–Ω–∏–π
[^6^]: –†–µ–∑–µ—Ä–≤–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–∞–∑–¥–µ–ª–æ–≤ (dd/Windows Backup)
[^7^]: –ê—Ä—Ö–∏–≤–∏—Ä–æ–≤–∞–Ω–∏–µ —Å —É—á—ë—Ç–æ–º –∏–Ω–∫—Ä–µ–º–µ–Ω—Ç–Ω—ã—Ö –∏–∑–º–µ–Ω–µ–Ω–∏–π

–ü–æ—à–∞–≥–æ–≤–∞—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –¥–ª—è –æ—Ç—á—ë—Ç–∞:

    –†—É—á–Ω–æ–µ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ (–ó–∞–¥–∞–Ω–∏–µ 1)

        Linux:

bash
cp -v ~/–î–æ–∫—É–º–µ–Ω—Ç—ã/* ~/Backup/ 2>&1 | tee backup.log

Windows:

    powershell
    Copy-Item -Path "C:\Users\–ò–º—è\–î–æ–∫—É–º–µ–Ω—Ç—ã" -Destination "D:\Backup" -Recurse -Verbose *>&1 > backup.log

–ü—Ä–æ–≤–µ—Ä–∫–∞ –ª–æ–≥–æ–≤

bash
# Linux
grep -i error backup_errors.log

# Windows
Select-String -Path .\backup.log -Pattern "Failed|Error"

–ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫–∞
–î–ª—è Linux (–¥–æ–±–∞–≤–∏—Ç—å –≤ crontab -e):

bash
# –ï–∂–µ–¥–Ω–µ–≤–Ω–æ –≤ 2:00 —Å —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ–º –Ω–∞ –ø–æ—á—Ç—É
0 2 * * * /opt/scripts/backup.sh | mail -s "Backup Report" admin@domain.com

–ü—Ä–æ–≤–µ—Ä–∫–∞ —Ü–µ–ª–æ—Å—Ç–Ω–æ—Å—Ç–∏

    bash
    # –î–ª—è tar-–∞—Ä—Ö–∏–≤–æ–≤
    tar -tvf backup.tar.gz | grep "–í–∞–∂–Ω—ã–π_—Ñ–∞–π–ª.docx"

    # –î–ª—è ZIP –≤ Windows
    [System.IO.Compression.ZipFile]::OpenRead("D:\Backup\docs.zip").Entries.FullName

–í–∞–∂–Ω–æ! –î–ª—è –æ–±–ª–∞—á–Ω—ã—Ö –±—ç–∫–∞–ø–æ–≤ –≤—Å–µ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ —à–∏—Ñ—Ä–æ–≤–∞–Ω–∏–µ:

bash
# Linux (GPG)
tar -czf - ~/–î–æ–∫—É–º–µ–Ω—Ç—ã | gpg --encrypt --recipient admin@domain.com -o backup.tar.gz.gpg

# Windows (7-Zip)
7z a -p"StrongPassword" -mhe=on docs.7z "C:\Users\–ò–º—è\–î–æ–∫—É–º–µ–Ω—Ç—ã"